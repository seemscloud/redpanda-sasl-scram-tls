apiVersion: cluster.redpanda.com/v1alpha2
kind: Redpanda
metadata:
  name: redpanda
spec:
  chartRef: {}
  clusterSpec:
    statefulset:
      replicas: 3
      {{- with .Values.redpanda.nodeSelector }}
      nodeSelector:
        {{- include "common.tplvalues.render" (dict "value" . "context" $) | nindent 6 | indent 2 }}
      {{- end }}
      {{- with .Values.redpanda.tolerations }}
      tolerations:
        {{- include "common.tplvalues.render" (dict "value" . "context" $) | nindent 6 }}
      {{- end }}
      podAntiAffinity:
        type: soft
        topologyKey: kubernetes.io/hostname
    storage:
      persistentVolume:
        storageClass: premium-rwo
        size: 10Gi
    resources:
      requests:
        cpu: "1"
        memory: 4Gi
    config:
      cluster:
        core_balancing_continuous: false
        partition_autobalancing_mode: node_add
    external:
      enabled: false
    auth:
      sasl:
        enabled: true
        mechanism: SCRAM-SHA-512
        secretRef: redpanda-admin-users
    tls:
      enabled: true
    listeners:
      kafka:
        tls:
          enabled: true
      admin:
        tls:
          enabled: true
      schemaRegistry:
        tls:
          enabled: true
      http:
        tls:
          enabled: true
      rpc:
        tls:
          enabled: true
    console:
      enabled: false
    monitoring:
      enabled: true
